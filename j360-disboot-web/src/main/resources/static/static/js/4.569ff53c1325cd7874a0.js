webpackJsonp([4],{319:function(t,e,n){function a(t){n(357)}var r=n(15)(n(325),n(373),a,null,null);t.exports=r.exports},325:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(186),r=n(185),o=n(362),i=n.n(o);e.default={components:{vDetail:i.a},data:function(){return{filters:{id:"",name:"",type:""},total:0,page:1,tableHeight:"100%",tableLoading:!1,tableList:[],isShowForm:!1,data:{},authorTypeList:[]}},methods:{handleCurrentChange:function(t){this.page=t,this.fetchList()},fetchList:function(){var t=this;t.tableHeight=document.getElementById("container").clientHeight-77-42-15;var e={id:t.filters.id,name:t.filters.name,type:t.filters.type,offset:0,size:10};e.offset=(t.page-1)*e.size,t.tableLoading=!0,n.i(r.a)("authorPage",e,t,function(e){t.tableLoading=!1;try{var n=(e.error,e.status,e.data);t.total=n.totalElements,t.tableList=n.content.map(function(e){return t.authorTypeList.forEach(function(t){t.id==e.type&&(e.typeDesc=t.name)}),e})}catch(t){a.a.jsErrNotify(t)}})},resetSearch:function(){this.filters={id:"",name:"",type:""},this.fetchList()},showForm:function(t){this.isShowForm=!0,this.data=t},getAuthorTypeList:function(){var t=this,e={};n.i(r.a)("authorTypes",e,t,function(e){try{var n=(e.error,e.status,e.data);n&&(t.authorTypeList=n)}catch(t){a.a.jsErrNotify(t)}})}},mounted:function(){this.fetchList(),this.getAuthorTypeList()}}},326:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(186),r=n(185);e.default={name:"vDetail",props:["value","data","authorTypeList"],data:function(){return{visible:!1,showLoading:!1,formTitle:"新增商家",formLoading:!1,formRules:{name:[{required:!0,message:"请输入商家名称",trigger:"blur"},{min:1,max:32,message:"长度在 1 到 32 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入商家简介",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:function(t,e,n){/^1[34578]\d{9}$/.test(e)||n(new Error("联系手机格式有误")),n()},trigger:"blur"}]},formData:{id:"",name:"",type:"",phone:"",description:"",coverId:"",coverUrl:""},inputVisible:!1,inputValue:"",avatarLoading:!1,authorTypes:[]}},computed:{detail:function(){var t=this;this.authorTypes=this.authorTypeList,t.value&&t.data.id&&t.visible&&(t.formTitle="编辑商家",t.formData=t.data)}},methods:{formSubmit:function(){var t=this,e=t.formData.coverId;e||t.$message.error("请上传商家头像");var o=new Object;o.id=t.formData.id,o.name=t.formData.name,o.type=t.formData.type,o.phone=t.formData.phone,o.description=t.formData.description,o.coverId=e,t.$refs.formData.validate(function(e){e&&(t.formLoading=!0,n.i(r.b)("authorSave",o,t,function(e){t.formLoading=!1;try{t.$message.success("提交成功"),t.$refs.formData.resetFields(),t.visible=!1,t.$emit("refresh")}catch(t){a.a.jsErrNotify(t)}}))})},onSuccess:function(t,e){this.formData.coverUrl=URL.createObjectURL(e.raw),this.formData.coverId=t.data.id},resetFormData:function(){var t=this;t.formTitle="新增商家",t.formData={id:"",name:"",type:"",phone:"",description:"",coverId:"",coverUrl:""},t.data={}}},watch:{detail:function(t){},value:function(t){this.visible=t},visible:function(t){this.$emit("input",t)}},mounted:function(){this.value&&(this.visible=!0)}}},350:function(t,e,n){e=t.exports=n(316)(!0),e.push([t.i,".table-expand label{width:90px;color:#99a9bf}.table-expand .el-form-item{margin-right:0;margin-bottom:0;width:100%}","",{version:3,sources:["/Users/joeysin/IdeaWorkSpace/IdeaWorkSpaces/ZJ_store_admin/src/components/page/business/business.vue"],names:[],mappings:"AAgLA,oBACI,WAAY,AACZ,aAAe,CAClB,AACD,4BACI,eAAgB,AAChB,gBAAiB,AACjB,UAAY,CACf",file:"business.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\n    表格展开部分样式\n*/\n.table-expand label {\n    width: 90px;\n    color: #99a9bf;\n}\n.table-expand .el-form-item {\n    margin-right: 0;\n    margin-bottom: 0;\n    width: 100%;\n}\n\n"],sourceRoot:""}])},357:function(t,e,n){var a=n(350);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(317)("d5a26ac6",a,!0)},362:function(t,e,n){var a=n(15)(n(326),n(371),null,null,null);t.exports=a.exports},371:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.formTitle,value:t.value},on:{close:t.resetFormData},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"120px",rules:t.formRules}},[n("el-form-item",{attrs:{label:"商家名称",prop:"name",required:""}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.name,callback:function(e){t.formData.name="string"==typeof e?e.trim():e},expression:"formData.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"商家类型",prop:"type",required:""}},[[""!=t.formData.id?n("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择商家类型",disabled:""},model:{value:t.formData.type,callback:function(e){t.formData.type=e},expression:"formData.type"}},t._l(t.authorTypes,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):n("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择商家类型"},model:{value:t.formData.type,callback:function(e){t.formData.type=e},expression:"formData.type"}},t._l(t.authorTypes,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))]],2),t._v(" "),n("el-form-item",{attrs:{label:"联系手机",prop:"phone",required:""}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.phone,callback:function(e){t.formData.phone=e},expression:"formData.phone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"商家简介",prop:"description",required:""}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:10},placeholder:"请输入商家简介"},model:{value:t.formData.description,callback:function(e){t.formData.description=e},expression:"formData.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"商家头像",prop:"coverId",required:""}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/ks3/image_upload","show-file-list":!1,"on-success":t.onSuccess}},[t.formData.coverUrl?n("img",{staticClass:"avatar",attrs:{src:t.formData.coverUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:t.formLoading},nativeOn:{click:function(e){t.formSubmit(e)}}},[t._v("提交")])],1)],1)},staticRenderFns:[]}},373:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:t.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"输入商家ID",icon:"circle-close","on-icon-click":t.resetSearch},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.fetchList(e)}},model:{value:t.filters.id,callback:function(e){t.filters.id=e},expression:"filters.id"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{placeholder:"输入商家名称",icon:"circle-close","on-icon-click":t.resetSearch},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.fetchList(e)}},model:{value:t.filters.name,callback:function(e){t.filters.name=e},expression:"filters.name"}})],1),t._v(" "),n("el-form-item",[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择商家分类"},on:{change:t.fetchList},model:{value:t.filters.type,callback:function(e){t.filters.type=e},expression:"filters.type"}},t._l(t.authorTypeList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.fetchList()}}},[t._v("查询")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showForm("-1")}}},[t._v("新增商家")])],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-expand",staticStyle:{width:"100%"},attrs:{data:t.tableList,stripe:"",border:"","max-height":t.tableHeight}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"url",label:"头像",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.coverUrl?n("img",{staticStyle:{width:"100%","vertical-align":"middle",margin:"10px auto"},attrs:{src:e.row.coverUrl,alt:""}}):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"商家分类",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.typeDesc)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"productCount",label:"作品数量",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"290"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",{staticClass:"mt-10"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){t.showForm(e.row)}}},[t._v("编辑")])],1)]}}])})],1),t._v(" "),n("el-col",{staticClass:"mt-10",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{"page-size":10,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),n("v-detail",{attrs:{data:t.data,authorTypeList:t.authorTypeList},on:{refresh:t.fetchList},model:{value:t.isShowForm,callback:function(e){t.isShowForm=e},expression:"isShowForm"}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.569ff53c1325cd7874a0.js.map