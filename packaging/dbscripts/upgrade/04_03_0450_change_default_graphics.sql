-- Add VNC device to Blank template and base Instance Types
-- Instance Types may not exist or they could already be modified
-- Blank can also be modified but it's either qxl or vga and so it either have "spice+vnc" already, or "just spice"(previous default) and adding vnc is what we want, or "just vnc" and then let's just not touch it

INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '00000000-0000-0000-0000-000000000000', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '00000000-0000-0000-0000-000000000000' and type = 'graphics' and device = 'vnc');
INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '00000003-0003-0003-0003-0000000000be', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '00000003-0003-0003-0003-0000000000be' and type = 'graphics' and device = 'vnc') AND EXISTS (SELECT 1 FROM vm_device WHERE vm_id = '00000003-0003-0003-0003-0000000000be');
INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '00000005-0005-0005-0005-0000000002e6', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '00000005-0005-0005-0005-0000000002e6' and type = 'graphics' and device = 'vnc') AND EXISTS (SELECT 1 FROM vm_device WHERE vm_id = '00000005-0005-0005-0005-0000000002e6');
INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '00000007-0007-0007-0007-00000000010a', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '00000007-0007-0007-0007-00000000010a' and type = 'graphics' and device = 'vnc') AND EXISTS (SELECT 1 FROM vm_device WHERE vm_id = '00000007-0007-0007-0007-00000000010a');
INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '00000009-0009-0009-0009-0000000000f1', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '00000009-0009-0009-0009-0000000000f1' and type = 'graphics' and device = 'vnc') AND EXISTS (SELECT 1 FROM vm_device WHERE vm_id = '00000009-0009-0009-0009-0000000000f1');
INSERT INTO vm_device (device_id, vm_id, type, device, address, spec_params, is_managed, is_plugged, is_readonly) SELECT uuid_generate_v1(), '0000000b-000b-000b-000b-00000000021f', 'graphics', 'vnc', '', '', true, true, false WHERE NOT EXISTS (select 1 from vm_device where vm_id = '0000000b-000b-000b-000b-00000000021f' and type = 'graphics' and device = 'vnc') AND EXISTS (SELECT 1 FROM vm_device WHERE vm_id = '0000000b-000b-000b-000b-00000000021f');
